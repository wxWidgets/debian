<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<!--BEGIN PROJECT_NAME--><title>wxWidgets: wxWidgets: Drag and Drop Overview</title><!--END PROJECT_NAME-->
<!--BEGIN !PROJECT_NAME--><title>wxWidgets: Drag and Drop Overview</title><!--END !PROJECT_NAME-->
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="custom_stylesheet.css" rel="stylesheet" type="text/css" />
$treeview
$search
$mathjax
</head>
<body>
<div id="top"><!-- do not remove this div! -->

<!--BEGIN TITLEAREA-->
<div id="titlearea">
<table cellspacing="0" cellpadding="0" style="width: 100%;">
 <tbody>
 <tr>
  <!--BEGIN PROJECT_LOGO-->
  <td id="projectlogo"><a href="http://www.wxwidgets.org/" target="_new"><img alt="Logo" src="$projectlogo"/></a></td>
  <!--END PROJECT_LOGO-->
  <td style="padding: 0.5em; text-align: right;">
   <!--BEGIN PROJECT_NUMBER--><span id="projectnumber">Version: 2.9.3</span><!--END PROJECT_NUMBER-->
  </td>
  <!--BEGIN DISABLE_INDEX-->
   <!--BEGIN SEARCHENGINE-->
   <td>$searchbox</td>
   <!--END SEARCHENGINE-->
  <!--END DISABLE_INDEX-->
 </tr>
 </tbody>
</table>
</div>
<!--END TITLEAREA-->
<!-- Generated by Doxygen 1.7.1 -->
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = 'open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = 'closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Categories</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><a class="el" href="index.html">Documentation</a>      </li>
      <li><a class="el" href="page_topics.html">Topic Overviews</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>Drag and Drop Overview </h1>  </div>
</div>
<div class="contents">
<p>Classes: <a class="el" href="classwx_data_object.html" title="A wxDataObject represents data that can be copied to or from the clipboard, or dragged and dropped...">wxDataObject</a>, <a class="el" href="classwx_text_data_object.html" title="wxTextDataObject is a specialization of wxDataObjectSimple for text data.">wxTextDataObject</a>, <a class="el" href="classwx_drop_source.html" title="This class represents a source for a drag and drop operation.">wxDropSource</a>, <a class="el" href="classwx_drop_target.html" title="This class represents a target for a drag and drop operation.">wxDropTarget</a>, <a class="el" href="classwx_text_drop_target.html" title="A predefined drop target for dealing with text data.">wxTextDropTarget</a>, <a class="el" href="classwx_file_drop_target.html" title="This is a drop target which accepts files (dragged from File Manager or Explorer).">wxFileDropTarget</a></p>
<p>Note that <code>wxUSE_DRAG_AND_DROP</code> must be defined in <code>setup.h</code> in order to use drag and drop in wxWidgets.</p>
<p>See also: <a class="el" href="overview_dataobject.html">wxDataObject Overview</a> and <a class="el" href="page_samples.html#page_samples_dnd">Drag &amp; Drop Sample</a>.</p>
<p>It may be noted that data transfer to and from the clipboard is quite similar to data transfer with drag and drop and the code to implement these two types is almost the same. In particular, both data transfer mechanisms store data in some kind of <a class="el" href="classwx_data_object.html" title="A wxDataObject represents data that can be copied to or from the clipboard, or dragged and dropped...">wxDataObject</a> and identify its format(s) using the <a class="el" href="classwx_data_format.html" title="A wxDataFormat is an encapsulation of a platform-specific format handle which is used by the system f...">wxDataFormat</a> class.</p>
<p>To be a <em>drag</em> source, i.e. to provide the data which may be dragged by the user elsewhere, you should implement the following steps:</p>
<ul>
<li><b>Preparation:</b> First of all, a data object must be created and initialized with the data you wish to drag. For example:</li>
</ul>
<div class="fragment"><pre class="fragment">    <a class="code" href="classwx_text_data_object.html" title="wxTextDataObject is a specialization of wxDataObjectSimple for text data.">wxTextDataObject</a> my_data(<span class="stringliteral">&quot;This text will be dragged.&quot;</span>);
</pre></div><ul>
<li><b>Drag start</b>: To start the dragging process (typically in response to a mouse click) you must call <a class="el" href="classwx_drop_source.html#a7053f3286614a78d0fd8c282c286778d" title="Starts the drag-and-drop operation which will terminate when the user releases the mouse...">wxDropSource::DoDragDrop</a> like this:</li>
</ul>
<div class="fragment"><pre class="fragment">    <a class="code" href="classwx_drop_source.html" title="This class represents a source for a drag and drop operation.">wxDropSource</a> dragSource( <span class="keyword">this</span> );
    dragSource.SetData( my_data );
    <a class="code" href="interface_2wx_2dnd_8h.html#adbd4b292582eebbc9a6ce3dee31c2afb" title="Result returned from a wxDropSource::DoDragDrop() call.">wxDragResult</a> result = dragSource.DoDragDrop( <span class="keyword">true</span> );
</pre></div><ul>
<li><b>Dragging:</b> The call to DoDragDrop() blocks the program until the user releases the mouse button (unless you override the <a class="el" href="classwx_drop_source.html#a2b667de6f631839d4c4383f436726f7f" title="You may give some custom UI feedback during the drag and drop operation by overriding this function...">wxDropSource::GiveFeedback</a> function to do something special). When the mouse moves in a window of a program which understands the same drag-and-drop protocol (any program under Windows or any program supporting the XDnD protocol under X Windows), the corresponding <a class="el" href="classwx_drop_target.html" title="This class represents a target for a drag and drop operation.">wxDropTarget</a> methods are called - see below.</li>
</ul>
<ul>
<li><b>Processing the result</b>: DoDragDrop() returns an <em>effect</em> code which is one of the values of <code>wxDragResult</code> enum (explained in <a class="el" href="classwx_drop_target.html" title="This class represents a target for a drag and drop operation.">wxDropTarget</a> page):</li>
</ul>
<div class="fragment"><pre class="fragment">    <span class="keywordflow">switch</span> (result)
    {
        <span class="keywordflow">case</span> <a class="code" href="interface_2wx_2dnd_8h.html#adbd4b292582eebbc9a6ce3dee31c2afba736c04c59caf8154a096e0d350492fc1" title="The data was successfully copied.">wxDragCopy</a>:
            <span class="comment">// copy the data</span>
            <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="interface_2wx_2dnd_8h.html#adbd4b292582eebbc9a6ce3dee31c2afba8b2ba916ca49cc93ef34a5e20684d18e" title="The data was successfully moved (MSW only).">wxDragMove</a>:
            <span class="comment">// move the data</span>
            <span class="keywordflow">break</span>;
        <span class="keywordflow">default</span>:
            <span class="comment">// do nothing</span>
            <span class="keywordflow">break</span>;
    }
</pre></div><p>To be a <em>drop</em> target, i.e. to receive the data dropped by the user you should follow the instructions below:</p>
<ul>
<li><b>Initialization:</b> For a window to be a drop target, it needs to have an associated <a class="el" href="classwx_drop_target.html" title="This class represents a target for a drag and drop operation.">wxDropTarget</a> object. Normally, you will call <a class="el" href="classwx_window.html#ae34b4d45433ca8287df0e47d46411e58" title="Associates a drop target with this window.">wxWindow::SetDropTarget</a> during window creation associating your drop target with it. You must derive a class from <a class="el" href="classwx_drop_target.html" title="This class represents a target for a drag and drop operation.">wxDropTarget</a> and override its pure virtual methods. Alternatively, you may derive from <a class="el" href="classwx_text_drop_target.html" title="A predefined drop target for dealing with text data.">wxTextDropTarget</a> or <a class="el" href="classwx_file_drop_target.html" title="This is a drop target which accepts files (dragged from File Manager or Explorer).">wxFileDropTarget</a> and override their OnDropText() or OnDropFiles() method.</li>
</ul>
<ul>
<li><b>Drop:</b> When the user releases the mouse over a window, wxWidgets asks the associated <a class="el" href="classwx_drop_target.html" title="This class represents a target for a drag and drop operation.">wxDropTarget</a> object if it accepts the data. For this, a <a class="el" href="classwx_data_object.html" title="A wxDataObject represents data that can be copied to or from the clipboard, or dragged and dropped...">wxDataObject</a> must be associated with the drop target and this data object will be responsible for the format negotiation between the drag source and the drop target. If all goes well, then <a class="el" href="classwx_drop_target.html#a5c27f66d59eb89ab7e014fd153ace093" title="Called after OnDrop() returns true.">wxDropTarget::OnData</a> will get called and the <a class="el" href="classwx_data_object.html" title="A wxDataObject represents data that can be copied to or from the clipboard, or dragged and dropped...">wxDataObject</a> belonging to the drop target can get filled with data.</li>
</ul>
<ul>
<li><b>The end</b>: After processing the data, DoDragDrop() returns either wxDragCopy or wxDragMove depending on the state of the keys Ctrl, Shift and Alt at the moment of the drop. There is currently no way for the drop target to change this return code. </li>
</ul>
</div>
<!--BEGIN GENERATE_TREEVIEW-->
    <li class="footer">
    	Page generated on Tue Dec 27 2011 19:36:05 by <!--[Doxygen 1.7.6+] $generatedby -->
    	<a href="http://www.doxygen.org/index.html" target="_new">Doxygen</a> 1.7.1</li>
   </ul>
 </div>
<!--END GENERATE_TREEVIEW-->
<!--BEGIN !GENERATE_TREEVIEW-->
<hr class="footer"/>
<address class="footer">
	<small>
		Page generated on Tue Dec 27 2011 19:36:05 by <!--[Doxygen 1.7.6+] $generatedby -->
		<a href="http://www.doxygen.org/index.html" target="_new">Doxygen</a> 1.7.1
	</small>
</address>
<!--END !GENERATE_TREEVIEW-->

<script src="wxwidgets.js" type="text/javascript"></script>

</body>
</html>
